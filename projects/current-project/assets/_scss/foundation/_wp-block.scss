//
//====>> WordPress Block Editor対応のノーマライズ <<====

//・Block EditorのスタイルをノーマライズするためのCSS
//・記事本文スコープ内での適切な表示を保証

////

// 1) リセット層 */
@layer reset {
  // 強すぎる * {margin:0;padding:0} はNG */
  *, *::before, *::after { box-sizing: border-box; }

  img, video, svg, canvas { max-width: 100%; height: auto; }
  iframe { max-width: 100%; }
}

// 2) ベース層：本文コンテナ内だけ整える（特異性0の :where を活用）*/
@layer base {
  // コンテンツ幅（block themeなら theme.json の値に合わせる） */
  :root{
    --content-size: var(--wp--style--global--content-size, 720px);
    --wide-size: var(--wp--style--global--wide-size, 1100px);
  }

  // 記事本文スコープ */
  .entry-content :where(p){ margin-block: 1em; }
  .entry-content :where(h1,h2,h3,h4,h5,h6){
    line-height: 1.3;
    margin-block: 1.2em .6em;
  }

  .entry-content :where(ul,ol){
    margin-block: 1em;
    padding-inline-start: 1.5em; // リストの字下げを戻す */
  }

  .entry-content :where(li){ margin-block: .3em; }

  .entry-content :where(blockquote){
    margin: 1.2em 0;
    padding: .8em 1em;
    border-left: 4px solid var(--wp--preset--color--contrast,#333);
    background: var(--wp--preset--color--base-2,transparent);
  }

  .entry-content :where(figure){ margin: 1.2em 0; }
  .entry-content :where(figcaption){
    font-size: .9em; opacity: .8; margin-top: .4em;
    text-align: center;
  }

  .entry-content :where(table){
    width: 100%; border-collapse: collapse; margin: 1.2em 0;
  }
  .entry-content :where(th,td){ padding: .6em .8em; border: 1px solid #ddd; }

  .entry-content :where(pre, code, kbd, samp){
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  }
  .entry-content :where(pre){
    overflow: auto; padding: 1em; background: #f7f7f7; border-radius: .4rem;
  }

  // 画像だけの段落が詰まりすぎないように */
  .entry-content :where(p > img:only-child){ display:block; margin-inline:auto; }

  // デフォルトの段落間隔に blockGap を反映（あれば） */
  .entry-content{
    --gap: var(--wp--style--block-gap, 1.2rem);
  }
}

// 3) レイアウト：alignwide / alignfull の横幅処理 */
@layer components {
  // 通常の本文幅を中央揃え */
  .entry-content > * {
    max-width: var(--content-size);
    margin-left: auto;
    margin-right: auto;
  }

  // wide */
  .entry-content > .alignwide {
    max-width: var(--wide-size);
  }

  // full：ビューポートいっぱい（スクロールバー幅考慮する場合は要調整） */
  .entry-content > .alignfull {
    width: 100vw;
    max-width: 100vw;
    margin-left: calc(50% - 50vw);
    margin-right: calc(50% - 50vw);
  }
}

